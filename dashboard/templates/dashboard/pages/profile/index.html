{% extends 'dashboard/themes/base.html' %}

{% block content %}
<div class="section">
    <h1 class="center">Profile</h1>

    <div class="avatar">
        {% if profile.avatar %}
            <img src="{{ profile.avatar.url }}" alt="Avatar" />
        {% else %}
            <div class="avatar-placeholder">
                {{ profile.user.first_name|first }}
            </div>
        {% endif %}
        <form id="upload-avatar-form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div id="upload-avatar-button" class="upload-button">
                <i class="material-icons">file_upload</i>
                <input type="file" id="avatar-file-input" name="avatar" onchange="this.form.submit()" style="display: none;">
            </div>
        </form>
    </div>

    <p class="light">
        <strong>Username:</strong> {{ profile.user.username }}<br>
        <strong>Email:</strong> {{ profile.user.email }}<br>
        <strong>First Name:</strong> {{ profile.user.first_name }}<br>
        <strong>Last Name:</strong> {{ profile.user.last_name }}<br>
    </p>

    <h2>Friends</h2>
    <div id="friend_list" hx-get="/friendship/list" hx-trigger="load" hx-swap="outerHTML">
        {% for friendship in friends %}
            <p>{{ friendship.friend.username }}</p>
        {% empty %}
            <p>You have no friends yet.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
